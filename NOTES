NOTES (new install)
===============


* Complete egg-info compilation
** TODO Shell-script (batch-file) generation
    - respect settings in chicken-config.h (STATICBUILD, etc.)
        - see egg-environment.scm
** Link-options are passed directly to csc
    - is this right?
** TODO Use "linkage" declaration for extensions + programs
    - add default compile/link options depending on linkage in code-generators.
** TODO What should the default optimization options be?
    - also for compiled import libraries.
    - respect DEBUGBUILD?
** TODO Do validation of egg-info at some stage

* TODO repository-path
    - allow multiple locations?
    - might be needed anyway, unless components are to be usable only when installed.
    - CHICKEN_REPOSITORY
    - perhaps: CHICKEN_INSTALL_REPOSITORY (defaults to install-prefix) as
      installation target.

* Setup features
** TODO Keep binaries + intermediate files.   
** TODO "keep-going" mode.
** TODO "-feature" + "-no-feature"
** TODO Hack for OSX SIP?

* TODO "build-dependencies" 
    - toplevel deps that are needed during build, override "dependencies", if given.
    - or is the intent differently? Ask moritz.

* TODO Extract download stuff

* TODO Temporary directory for saving scripts + intermediate files

* TODO Check what cmdline options to retain
** TODO Option for explicitly generating Windows/UNIX build/install scripts
    - i.e. selecting target platform.

* Things to resolve
** setup-info files
*** one for the whole egg (use "components" to find associated parts).
*** TODO Fix "extension-information"
    - syntax-only extensions.
    - on a statically built chicken, import-libs need to be installed as source.
** TODO setup.defaults
** TODO Retrieval from local directory
** Cross-build + cross-chickens
*** TODO Allow compilation in different build-dirs to avoid stale binaries.

* TODO Drop CHICKEN_PREFIX

* Drop
** TODO svn transport
** TODO deployment

* TODO Remove setup-api/setup-download from repo

* Build/install scripts
** TODO fully sh(1) compatible
    - http://people.fas.harvard.edu/~lib113/reference/unix/portable_scripting.html
    - https://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/cmd.mspx?mfr=true
** TODO "chicken-do" tool to build if dependencies are newer than target
    - "usage: chicken-do TARGET CMD ... : DEPENDENCIES ..."
    - try to avoid quoting hell, especially on Windows.
    - ideally, use execvp/CreateProcess
        - http://www.cplusplus.com/forum/windows/3398/ and
          http://www.cplusplus.com/forum/beginner/1988/3/#msg14102
** TODO Consider making this powerful enough to build chicken
    - needs support for object-files (C or Scheme) and building libraries.
** TODO Handle case where program and extension in egg have same name
    - e.g. "hyde" in hyde egg.
    - can we ignore this? if source files have different names, just compiling exe/so directly should
      work.

* Install scripts
** TODO Allow overrriding DESTDIR, PREFIX
** TODO Install setup-info
** TODO Use install(1) ?

* Tools
** TODO chicken-install
** TODO chicken-uninstall
** TODO chicken-status

* TODO Copyright headers

* TODO Documentation
    - remove old and obsolete stuff (deployment, dropped options, etc.)
    - chicken-do
